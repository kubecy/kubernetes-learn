# Pod设计模式

## 1.容器设计模式（1）

1. 基于容器的分布式系统中常用的3类设计模式

   - 单容器模式：单一容器形式运行的应用
   - 单节点模式：由强耦合的多个容器协同共生
   - 多节点模式：基于特定部署单元（Pod）实现分布式算法

2. 单节点多容器模式

   - 一种跨容器的设计模式

   - 目的是在单个节点之上同时运行多个共生关系的容器，因而容器管理系统需要由将它们作为一个原子单位进

     行统一调度

   - Pod概念就是这个设计模式的实现之一

## 2.容器设计模式（2）

1. 单节点多容器模式的常见实现

   - Sidecar模式

     - Pod中的应用由主应用程序（通常是基于HTTP协议的应用程序）以及一个Sidecar容器组成

     - 辅助容器用于为主容器提供辅助服务以增强主容器的功能，是主应用程序是必不可少的一部分，但却未必非得运行

       为应用的一部分

   - Ambassador模式

     - Pod中的应用由主应用程序和一个Ambassador容器组成

     - 辅助容器代表主容器发送网络请求至外部环境中，因此可以将其视作主容器应用的大使

     - 应用场景：云原生应用程序需要诸如断路、路由、计量和监视等功能，但更新已有的应用程序或现有代码库以添加

       这些功能可能很困难，甚至难以实现，进程外代理便成了一种有效的解决方案

## 3.容器设计模式（3）

1. 单节点多容器模式的常见实现

   - Adapter模式

     - Pod中的应用由主应用程序和一个Adapter容器组成

     - Adapter容器为主应用程序提供一致的接口，实现了模块重用，支持标准化和规范化主容器应用程序的输出以便于外

       部服务进行聚合

   - Init Container模式

     - 一个Pod中可以同时定义多个Init容器

     - Init容器负责以不同于主容器的生命周期来完成那些必要的初始化任务，包括在文件系统上设置必要的特殊权限、

       数据库模式设置或为主应用程序提供初始数据等，但这些初始化逻辑无法包含在应用程序的镜像文件中，或者出于

       安全原因，应用程序镜像没有执行初始化活动的权限等等

     - Init容器需要串行运行，且在所有Init容器均正常终止后，才能运行主容器

